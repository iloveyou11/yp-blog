---
title: 页面高度问题
date: 2019-07-26
categories: 技巧
author: yangpei
tags:
  - 技巧
comments: true
cover_picture: /images/banner.jpg
---

**js 获取元素宽高**
为了方便书写，以下用 dom 来表示获取的 HTML 的节点。

<!-- more -->

**1. dom.style.width/height**
这种方式只能取到 dom 元素内联样式所设置的宽高，也就是说如果该节点的样式是在 style 标签中或外联的 CSS 文件中设置的话，通过这种方法是获取不到 dom 的宽高的。
**2. dom.currentStyle.width/height**
这种方式获取的是在页面渲染完成后的结果，就是说不管是哪种方式设置的样式，都能获取到。但这种方式只有 IE 浏览器支持。
**3. window.getComputedStyle(dom).width/height**
这种方式的原理和 2 是一样的，这个可以兼容更多的浏览器，通用性好一些。
**4. dom.getBoundingClientRect().width/height**
这种方式是根据元素在视窗中的绝对位置来获取宽高的
**5. dom.offsetWidth/offsetHeight**
这个就没什么好说的了，最常用的，也是兼容最好的。

**页面元素高度变化监听**

1. 设置定时器，实时监听 div 的宽高是否发生了变化
   思路：获取外层容器的高度，重置即可（以下示例为 iframe）
   ![Alt text](http://i1.fuimg.com/695012/7a1fa0012b6cc07a.png)
2. 在引起宽高变化的地方，抛出事件；
3. 使用浏览器自带的 MutationObserver
   ![MutationObserver示意图](http://i1.fuimg.com/695012/885b0bb8dfd63f91.png)
   Mutation Observer API 用来监视 DOM 变动。DOM 的任何变动，比如节点的增减、属性的变动、文本内容的变动，这个 API 都可以得到通知。
